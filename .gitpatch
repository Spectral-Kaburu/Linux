#!/bin/bash

# We are going to solve the problem by mapping specific files to their
# git paths

# NOTE: Path MUST exist in git tree, if not;
#		cd /$HOME/$REPO/ 
#       	mkdir -p gitcharms/
#       	cd gitcharms/
#       	touch .gitalien
#       	git add .gitalien - MUST, because git can't track empty dirs
#       	git commit -m "Initial commit"
#		âœ” Successfully added Path to git
typeset -A FILE_PATHS=(
  [".gitalien"]="$HOME/Documents/Linux/gitcharms/.gitalien"
  [".gitpatch"]="$HOME/Documents/Linux/gitcharms/.gitpatch"
  [".gitchaos"]="$HOME/Documents/Linux/gitcharms/.gitchaos"
)

# The function doing the magic of making sense of your cryptic command:)
get_git_path() {
  local file=$1
  
  if [[ -n "${FILE_PATHS[$file]}" ]]; then
    echo "${FILE_PATHS[$file]}"
  else
    echo "Defaulting to repo root..."
    echo "$file"
  fi
}

linux_add() {
  local file="$1"
  local target_path
  target_path=$(get_git_path "$file")
  
  mkdir -p "$(dirname '$targetPath')"

  cp "$file" "$target_path"

  git add "$target_path"

  echo "Added $file as $target_path"
}
